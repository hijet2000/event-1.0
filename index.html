<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#4f46e5" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Event Registration Platform</title>
    <link rel="manifest" href="/manifest.json">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lato:wght@400;700&family=Montserrat:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    
    <!-- Import Map for JS Modules -->
    <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.27.0",
    "cors": "https://aistudiocdn.com/cors@^2.8.5",
    "dotenv": "https://aistudiocdn.com/dotenv@^17.2.3",
    "bcrypt": "https://aistudiocdn.com/bcrypt@^6.0.0",
    "express": "https://aistudiocdn.com/express@^5.1.0",
    "jsonwebtoken": "https://aistudiocdn.com/jsonwebtoken@^9.0.2",
    "pg": "https://aistudiocdn.com/pg@^8.16.3",
    "jspdf": "https://aistudiocdn.com/jspdf@^2.5.1",
    "cookie-parser": "https://aistudiocdn.com/cookie-parser@^1.4.7",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "util": "https://aistudiocdn.com/util@^0.12.5",
    "fs": "https://aistudiocdn.com/fs@^0.0.1-security",
    "nodemailer": "https://aistudiocdn.com/nodemailer@^7.0.10",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1",
    "vite": "https://aistudiocdn.com/vite@^7.2.4",
    "@stripe/stripe-js": "https://aistudiocdn.com/@stripe/stripe-js@^8.5.2",
    "stripe": "https://aistudiocdn.com/stripe@^20.0.0",
    "@stripe/react-stripe-js": "https://aistudiocdn.com/@stripe/react-stripe-js@^5.4.0",
    "body-parser": "https://aistudiocdn.com/body-parser@^2.2.1",
    "mime-types": "https://aistudiocdn.com/mime-types@^3.0.2",
    "socket.io": "https://aistudiocdn.com/socket.io@^4.7.4",
    "socket.io-client": "https://aistudiocdn.com/socket.io-client@^4.7.4",
    "http": "https://aistudiocdn.com/http@^0.0.1-security",
    "helmet": "https://aistudiocdn.com/helmet@^8.1.0",
    "express-rate-limit": "https://aistudiocdn.com/express-rate-limit@^8.2.1",
    "multer": "https://aistudiocdn.com/multer@^2.0.2",
    "buffer": "https://aistudiocdn.com/buffer@^6.0.3",
    "@capacitor/core": "https://esm.sh/@capacitor/core@^8.0.0",
    "@capacitor/haptics": "https://esm.sh/@capacitor/haptics@^8.0.0",
    "@transistorsoft/capacitor-background-fetch": "https://esm.sh/@transistorsoft/capacitor-background-fetch@^7.1.0",
    "@capacitor-community/contacts": "https://esm.sh/@capacitor-community/contacts@^7.0.0"
  }
}
</script>
    
    <style>
      :root {
        /* These CSS variables will be updated by the ThemeContext */
        --color-primary: #4f46e5;
        --color-secondary: #ec4899;
        --color-background-color: #f9fafb;
        --font-family: 'Inter', sans-serif;
        /* Safe area insets for notched devices */
        --sat: env(safe-area-inset-top);
        --sab: env(safe-area-inset-bottom);
        --sal: env(safe-area-inset-left);
        --sar: env(safe-area-inset-right);
      }
      html.dark {
        --color-background-color: #111827;
      }
      body {
        font-family: var(--font-family);
        background-color: var(--color-background-color);
        /* Ensure safe areas are respected */
        padding-top: var(--sat);
        padding-bottom: var(--sab);
        padding-left: var(--sal);
        padding-right: var(--sar);
        overscroll-behavior-y: none; /* Prevent pull-to-refresh on mobile app feel */
      }
      @keyframes fadeInDown {
        from {
          opacity: 0;
          transform: translateY(-5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in-down {
        animation: fadeInDown 0.3s ease-out;
      }

      /* --- Accessibility Overrides --- */
      
      /* Large Text Mode */
      html.a11y-large-text {
        font-size: 110%;
      }
      html.a11y-xl-text {
        font-size: 125%;
      }

      /* Reduced Motion */
      html.a11y-reduce-motion *,
      html.a11y-reduce-motion *::before,
      html.a11y-reduce-motion *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }

      /* High Contrast Mode */
      html.a11y-high-contrast {
        --color-primary: #FFFF00 !important; /* Yellow */
        --color-secondary: #00FFFF !important; /* Cyan */
        --color-background-color: #000000 !important;
        color: #FFFFFF !important;
        background-color: #000000 !important;
      }
      html.a11y-high-contrast body {
        background-color: #000000 !important;
        color: #FFFFFF !important;
      }
      html.a11y-high-contrast a {
        color: #FFFF00 !important;
        text-decoration: underline !important;
      }
      html.a11y-high-contrast button {
        border: 2px solid #FFFFFF !important;
        background-color: #000000 !important;
        color: #FFFF00 !important;
      }
      html.a11y-high-contrast .bg-white, 
      html.a11y-high-contrast .dark\:bg-gray-800,
      html.a11y-high-contrast .bg-gray-50,
      html.a11y-high-contrast nav,
      html.a11y-high-contrast footer {
        background-color: #000000 !important;
        color: #FFFFFF !important;
        border-color: #FFFFFF !important;
      }
      html.a11y-high-contrast img {
        filter: grayscale(100%) contrast(120%);
      }

      /* Dyslexia Friendly Font */
      html.a11y-dyslexia-font body {
        font-family: 'Open Sans', 'Comic Sans MS', sans-serif !important;
        line-height: 1.6 !important;
        letter-spacing: 0.05em !important;
      }

      /* Links Underline */
      html.a11y-underline-links a {
        text-decoration: underline !important;
      }
      
      /* Skip Link */
      .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        background: #000;
        color: white;
        padding: 8px;
        z-index: 100;
        transition: top 0.3s;
      }
      .skip-link:focus {
        top: 0;
      }
    </style>
</head>
<body class="antialiased">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    
    <!-- Main Application Script -->
    <script type="module" src="/index.tsx"></script>
    
    <!-- Helper Scripts -->
    <script>
      // Handle dark mode persistence
      if (localStorage.getItem('adminDarkMode') === 'true' || (!('adminDarkMode' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }

      // Configure Tailwind
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: 'var(--color-primary)',
              secondary: 'var(--color-secondary)',
              'background-color': 'var(--color-background-color)'
            },
            fontFamily: {
                sans: ['var(--font-family)', 'sans-serif'],
            }
          }
        }
      }
    </script>
</body>
</html>